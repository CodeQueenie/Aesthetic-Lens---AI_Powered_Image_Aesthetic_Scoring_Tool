<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aesthetic Score Results - Aesthetic Lens</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .metric-width-0 { width: 0%; }
        .metric-width-1 { width: 1%; }
        .metric-width-2 { width: 2%; }
        .metric-width-3 { width: 3%; }
        .metric-width-4 { width: 4%; }
        .metric-width-5 { width: 5%; }
        .metric-width-6 { width: 6%; }
        .metric-width-7 { width: 7%; }
        .metric-width-8 { width: 8%; }
        .metric-width-9 { width: 9%; }
        .metric-width-10 { width: 10%; }
        .metric-width-11 { width: 11%; }
        .metric-width-12 { width: 12%; }
        .metric-width-13 { width: 13%; }
        .metric-width-14 { width: 14%; }
        .metric-width-15 { width: 15%; }
        .metric-width-16 { width: 16%; }
        .metric-width-17 { width: 17%; }
        .metric-width-18 { width: 18%; }
        .metric-width-19 { width: 19%; }
        .metric-width-20 { width: 20%; }
        .metric-width-21 { width: 21%; }
        .metric-width-22 { width: 22%; }
        .metric-width-23 { width: 23%; }
        .metric-width-24 { width: 24%; }
        .metric-width-25 { width: 25%; }
        .metric-width-26 { width: 26%; }
        .metric-width-27 { width: 27%; }
        .metric-width-28 { width: 28%; }
        .metric-width-29 { width: 29%; }
        .metric-width-30 { width: 30%; }
        .metric-width-31 { width: 31%; }
        .metric-width-32 { width: 32%; }
        .metric-width-33 { width: 33%; }
        .metric-width-34 { width: 34%; }
        .metric-width-35 { width: 35%; }
        .metric-width-36 { width: 36%; }
        .metric-width-37 { width: 37%; }
        .metric-width-38 { width: 38%; }
        .metric-width-39 { width: 39%; }
        .metric-width-40 { width: 40%; }
        .metric-width-41 { width: 41%; }
        .metric-width-42 { width: 42%; }
        .metric-width-43 { width: 43%; }
        .metric-width-44 { width: 44%; }
        .metric-width-45 { width: 45%; }
        .metric-width-46 { width: 46%; }
        .metric-width-47 { width: 47%; }
        .metric-width-48 { width: 48%; }
        .metric-width-49 { width: 49%; }
        .metric-width-50 { width: 50%; }
        .metric-width-51 { width: 51%; }
        .metric-width-52 { width: 52%; }
        .metric-width-53 { width: 53%; }
        .metric-width-54 { width: 54%; }
        .metric-width-55 { width: 55%; }
        .metric-width-56 { width: 56%; }
        .metric-width-57 { width: 57%; }
        .metric-width-58 { width: 58%; }
        .metric-width-59 { width: 59%; }
        .metric-width-60 { width: 60%; }
        .metric-width-61 { width: 61%; }
        .metric-width-62 { width: 62%; }
        .metric-width-63 { width: 63%; }
        .metric-width-64 { width: 64%; }
        .metric-width-65 { width: 65%; }
        .metric-width-66 { width: 66%; }
        .metric-width-67 { width: 67%; }
        .metric-width-68 { width: 68%; }
        .metric-width-69 { width: 69%; }
        .metric-width-70 { width: 70%; }
        .metric-width-71 { width: 71%; }
        .metric-width-72 { width: 72%; }
        .metric-width-73 { width: 73%; }
        .metric-width-74 { width: 74%; }
        .metric-width-75 { width: 75%; }
        .metric-width-76 { width: 76%; }
        .metric-width-77 { width: 77%; }
        .metric-width-78 { width: 78%; }
        .metric-width-79 { width: 79%; }
        .metric-width-80 { width: 80%; }
        .metric-width-81 { width: 81%; }
        .metric-width-82 { width: 82%; }
        .metric-width-83 { width: 83%; }
        .metric-width-84 { width: 84%; }
        .metric-width-85 { width: 85%; }
        .metric-width-86 { width: 86%; }
        .metric-width-87 { width: 87%; }
        .metric-width-88 { width: 88%; }
        .metric-width-89 { width: 89%; }
        .metric-width-90 { width: 90%; }
        .metric-width-91 { width: 91%; }
        .metric-width-92 { width: 92%; }
        .metric-width-93 { width: 93%; }
        .metric-width-94 { width: 94%; }
        .metric-width-95 { width: 95%; }
        .metric-width-96 { width: 96%; }
        .metric-width-97 { width: 97%; }
        .metric-width-98 { width: 98%; }
        .metric-width-99 { width: 99%; }
        .metric-width-100 { width: 100%; }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center my-5">
            <h1 class="display-4">Aesthetic Lens</h1>
            <p class="lead">Image Analysis Results</p>
            <div class="mt-3">
                <a href="{{ url_for('index') }}" class="btn btn-outline-primary">
                    <i class="fas fa-home me-2"></i>Home
                </a>
                <a href="{{ url_for('examples') }}" class="btn btn-outline-primary ms-2">
                    <i class="fas fa-images me-2"></i>Examples
                </a>
            </div>
        </header>

        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card shadow">
                    <div class="card-body">
                        <h2 class="card-title text-center mb-4">Aesthetic Score Results</h2>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="image-container mb-4">
                                    <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded Image" class="img-fluid rounded">
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="score-container text-center mb-4">
                                    <h3>Aesthetic Score</h3>
                                    <div class="score-circle">
                                        <span class="score-value">{{ score }}</span>
                                        <span class="score-max">/10</span>
                                    </div>
                                    
                                    <div class="score-bar mt-3">
                                        <div class="progress">
                                            <div class="progress-bar score-width-{{ score|int }}" role="progressbar" aria-valuenow="{{ score }}" aria-valuemin="0" aria-valuemax="10"></div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-1">
                                            <small>Poor</small>
                                            <small>Excellent</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="feedback-container">
                                    <h3>Feedback</h3>
                                    <div class="card bg-light">
                                        <div class="card-body">
                                            <p class="feedback-text">{{ feedback }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg px-5">
                                <i class="fas fa-upload me-2"></i>Analyze Another Image
                            </a>
                            <button type="button" class="btn btn-outline-success ms-2" data-bs-toggle="modal" data-bs-target="#contributeModal">
                                <i class="fas fa-share-alt me-2"></i>Contribute as Example
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">Your Image</h5>
                    </div>
                    <div class="card-body text-center">
                        <img src="{{ url_for('uploaded_file', filename=filename) }}" class="img-fluid rounded" alt="Uploaded Image" style="max-height: 300px;">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">Improvement Visualization</h5>
                    </div>
                    <div class="card-body text-center">
                        <img src="{{ url_for('uploaded_file', filename=filename) }}" class="img-fluid rounded filtered-image" alt="Enhanced Image" style="max-height: 300px; filter: contrast(110%) saturate(110%) brightness(105%);">
                        <p class="text-muted mt-2"><small>AI-enhanced visualization (example only)</small></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card shadow">
                    <div class="card-body">
                        <h3 class="card-title">Understanding Your Score</h3>
                        <p>
                            The aesthetic score is calculated using a Neural Image Assessment (NIMA) model that evaluates various aspects of your image,
                            including composition, lighting, color harmony, and subject matter. The score ranges from 1 to 10, with higher scores
                            indicating better aesthetic quality.
                        </p>
                        <div class="row mt-3">
                            <div class="col-md-4">
                                <div class="score-explanation">
                                    <h5><i class="fas fa-star-half-alt me-2 text-warning"></i>1-3: Poor</h5>
                                    <p>Images with significant aesthetic issues in composition, lighting, or subject matter.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="score-explanation">
                                    <h5><i class="fas fa-star me-2 text-warning"></i>4-6: Average</h5>
                                    <p>Images with decent aesthetic quality but room for improvement in composition or visual appeal.</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="score-explanation">
                                    <h5><i class="fas fa-star me-2 text-warning"></i>7-10: Excellent</h5>
                                    <p>Images with strong aesthetic quality, demonstrating excellent composition, lighting, and visual appeal.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">Specific Improvement Suggestions</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            {% if score < 5.0 %}
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-lightbulb text-warning fa-2x mb-2"></i>
                                    <h6>Lighting</h6>
                                    <p>Consider better lighting conditions. Try using natural light or proper artificial lighting to enhance your subject.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-crop-alt text-primary fa-2x mb-2"></i>
                                    <h6>Composition</h6>
                                    <p>Apply the rule of thirds. Position key elements along the lines or at the intersections of a 3×3 grid.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-sliders-h text-success fa-2x mb-2"></i>
                                    <h6>Focus</h6>
                                    <p>Ensure your subject is in sharp focus. Consider using a wider aperture to create a pleasing background blur.</p>
                                </div>
                            </div>
                            {% elif score < 7.0 %}
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-palette text-primary fa-2x mb-2"></i>
                                    <h6>Color Balance</h6>
                                    <p>Adjust the color balance to create a more harmonious look. Consider using complementary colors.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-object-group text-success fa-2x mb-2"></i>
                                    <h6>Framing</h6>
                                    <p>Improve the framing of your subject. Try different angles or use natural frames in the environment.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-adjust text-warning fa-2x mb-2"></i>
                                    <h6>Contrast</h6>
                                    <p>Enhance the contrast slightly to make the image more dynamic and give it more depth.</p>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-star text-warning fa-2x mb-2"></i>
                                    <h6>Fine Details</h6>
                                    <p>Your image is already excellent! Consider subtle refinements in post-processing to enhance fine details.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-magic text-primary fa-2x mb-2"></i>
                                    <h6>Artistic Touch</h6>
                                    <p>Experiment with subtle artistic effects to give your already strong image a unique signature style.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="suggestion-item">
                                    <i class="fas fa-expand-arrows-alt text-success fa-2x mb-2"></i>
                                    <h6>Presentation</h6>
                                    <p>Consider how this image would look in different formats or as part of a series with similar aesthetic qualities.</p>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">Image Analysis Breakdown</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="text-center mb-4">This breakdown shows how different aspects of your image contribute to the overall aesthetic score.</p>
                                
                                <div class="analysis-metrics">
                                    <div class="row text-center">
                                        <div class="col-md-3 col-6 mb-4">
                                            <div class="metric-item">
                                                <h6>Composition</h6>
                                                <div class="metric-bar-container">
                                                    <div class="metric-bar metric-width-{{ (score / 10 * 85)|int }}"></div>
                                                </div>
                                                <small class="text-muted">{{ (score / 10 * 85)|int }}%</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-4">
                                            <div class="metric-item">
                                                <h6>Lighting</h6>
                                                <div class="metric-bar-container">
                                                    <div class="metric-bar metric-width-{{ ((score - 0.5) / 10 * 100)|int }}"></div>
                                                </div>
                                                <small class="text-muted">{{ ((score - 0.5) / 10 * 100)|int }}%</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-4">
                                            <div class="metric-item">
                                                <h6>Color Harmony</h6>
                                                <div class="metric-bar-container">
                                                    <div class="metric-bar metric-width-{{ ((score + 0.5) / 10 * 90)|int }}"></div>
                                                </div>
                                                <small class="text-muted">{{ ((score + 0.5) / 10 * 90)|int }}%</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3 col-6 mb-4">
                                            <div class="metric-item">
                                                <h6>Subject Interest</h6>
                                                <div class="metric-bar-container">
                                                    <div class="metric-bar metric-width-{{ (score / 10 * 95)|int }}"></div>
                                                </div>
                                                <small class="text-muted">{{ (score / 10 * 95)|int }}%</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contribute Modal -->
        <div class="modal fade" id="contributeModal" tabindex="-1" aria-labelledby="contributeModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="contributeModalLabel">Contribute Your Image as an Example</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="{{ url_for('contribute_example') }}" method="post">
                        <div class="modal-body">
                            <p>Your image will be added to our examples gallery to help other users understand the scoring system.</p>
                            
                            <input type="hidden" name="filename" value="{{ filename }}">
                            <input type="hidden" name="score" value="{{ score }}">
                            
                            <div class="mb-3">
                                <label for="contributor_name" class="form-label">Your Name (Optional)</label>
                                <input type="text" class="form-control" id="contributor_name" name="contributor_name" placeholder="Anonymous">
                            </div>
                            
                            <div class="mb-3">
                                <label for="image_description" class="form-label">Image Description</label>
                                <textarea class="form-control" id="image_description" name="image_description" rows="2" required placeholder="Briefly describe your image"></textarea>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="permission" name="permission" required>
                                <label class="form-check-label" for="permission">
                                    I confirm that I have the rights to this image and grant permission to use it as an example.
                                </label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-success">Contribute</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <footer class="text-center mt-5 mb-4">
            <p>
                <a href="https://github.com/yourusername/aesthetic-lens" target="_blank" class="text-decoration-none">
                    <i class="fab fa-github me-1"></i>View on GitHub
                </a>
            </p>
            <p class="text-muted">&copy; 2025 Aesthetic Lens</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
